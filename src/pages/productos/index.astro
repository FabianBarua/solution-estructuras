---
import SectionResize from "@/components/SectionResize.astro";
import Layout from "@/layouts/Layout.astro";
import { ALL_PARAMS, ALL_SORTS } from "@/shared/constants";
import { ProductsSection } from "@react/ProductsSection";

const initialCategories = [
  {
    id: 1,
    name: "Categoria 1",
    active: true,
  },
  {
    id: 2,
    name: "Categoria 2",
    active: false,
  },
  {
    id: 3,
    name: "Categoria 3",
    active: false,
  },
  {
    id: 4,
    name: "Categoria 4",
    active: false,
  },
  {
    id: 5,
    name: "Categoria 5",
    active: false,
  },
];

let params = Astro.url.searchParams;

const initialParams = {
  categories: params.get(ALL_PARAMS.categories) || "",
  search: params.get(ALL_PARAMS.search) || "",
  page: params.get(ALL_PARAMS.page) || 1,
  sortID: params.get(ALL_PARAMS.sortID) || ALL_SORTS[0].id,
};
---

<Layout title="Buscando productos 🔍">
  <SectionResize>
    <ProductsSection
      client:load
      initialCategories={initialCategories}
      initialParams={initialParams}
    />
  </SectionResize>
</Layout>
